/**
 * ObjectUpdate Packet
 *
 * This file is used to help our packet serialization and deserialization
 * process, and to create new packets on the fly.
 *
 * ⚠️ Do not edit this file manually, it is generated by the `codegen` script!
 *
 * @see {@link http://wiki.secondlife.com/wiki/Message_Layout}
 */

import * as Types from "~/network/types"
import { Packet } from "./packet"

export interface ObjectUpdateData {
	regionData?: {
		regionHandle: number | bigint
		timeDilation: number
	}
	objectData?: {
		id: number
		state: number
		fullId: string
		crc: number
		pCode: number
		material: number
		clickAction: number
		scale: Types.Vector3
		objectData: string | Buffer
		parentId: number
		updateFlags: number
		pathCurve: number
		profileCurve: number
		pathBegin: number
		pathEnd: number
		pathScaleX: number
		pathScaleY: number
		pathShearX: number
		pathShearY: number
		pathTwist: number
		pathTwistBegin: number
		pathRadiusOffset: number
		pathTaperX: number
		pathTaperY: number
		pathRevolutions: number
		pathSkew: number
		profileBegin: number
		profileEnd: number
		profileHollow: number
		textureEntry: string | Buffer
		textureAnim: string | Buffer
		nameValue: string | Buffer
		data: string | Buffer
		text: string | Buffer
		textColor: Types.Color4
		mediaUrl: string | Buffer
		pSBlock: string | Buffer
		extraParams: string | Buffer
		sound: string
		ownerId: string
		gain: number
		flags: number
		radius: number
		jointType: number
		jointPivot: Types.Vector3
		jointAxisOrAnchor: Types.Vector3
	}[]
}

export class ObjectUpdate extends Packet<ObjectUpdateData> {
	public static override id = 12
	public static override frequency = 2
	public static override trusted = true
	public static override compression = true

	public static override format = new Map([
		[
			"regionData",
			{
				quantity: 1,
				parameters: new Map<string, Types.Type>([
					["regionHandle", Types.U64],
					["timeDilation", Types.U16],
				]),
			},
		],
		[
			"objectData",
			{
				parameters: new Map<string, Types.Type>([
					["id", Types.U32],
					["state", Types.U8],
					["fullId", Types.UUID],
					["crc", Types.U32],
					["pCode", Types.U8],
					["material", Types.U8],
					["clickAction", Types.U8],
					["scale", Types.Vector3],
					["objectData", Types.Variable1],
					["parentId", Types.U32],
					["updateFlags", Types.U32],
					["pathCurve", Types.U8],
					["profileCurve", Types.U8],
					["pathBegin", Types.U16],
					["pathEnd", Types.U16],
					["pathScaleX", Types.U8],
					["pathScaleY", Types.U8],
					["pathShearX", Types.U8],
					["pathShearY", Types.U8],
					["pathTwist", Types.S8],
					["pathTwistBegin", Types.S8],
					["pathRadiusOffset", Types.S8],
					["pathTaperX", Types.S8],
					["pathTaperY", Types.S8],
					["pathRevolutions", Types.U8],
					["pathSkew", Types.S8],
					["profileBegin", Types.U16],
					["profileEnd", Types.U16],
					["profileHollow", Types.U16],
					["textureEntry", Types.Variable2],
					["textureAnim", Types.Variable1],
					["nameValue", Types.Variable2],
					["data", Types.Variable2],
					["text", Types.Variable1],
					["textColor", Types.Color4],
					["mediaUrl", Types.Variable1],
					["pSBlock", Types.Variable1],
					["extraParams", Types.Variable1],
					["sound", Types.UUID],
					["ownerId", Types.UUID],
					["gain", Types.F32],
					["flags", Types.U8],
					["radius", Types.F32],
					["jointType", Types.U8],
					["jointPivot", Types.Vector3],
					["jointAxisOrAnchor", Types.Vector3],
				]),
			},
		],
	])
}
